<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>PipeOpUpdateTarget — mlr_pipeops_updatetarget • mlr3ordinal</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/journal/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<link href="../extra.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="PipeOpUpdateTarget — mlr_pipeops_updatetarget" />
<meta property="og:description" content="FOR INTERNAL USE IN MLR3ORDINAL ONLY!
EXPERIMENTAL, API SUBJECT TO CHANGE
Handles target transformation operations that do not need explicit inversion.
In case the new target is required during predict, creates a vector of NA.
Works similar to PipeOpTargetTrafo and
PipeOpTargetMutate, but forgoes the
inversion step.
In case target after the trafo is a factor, levels are saved to $state.
During prediction: Sets all target values to NA before calling the trafo again.
In case target after the trafo is a factor, levels saved in the state are
set during prediction.
As a special case when trafo is identity and new_target_name matches an existing column
name of the data of the input Task, this column is set as the new target. Depending on
drop_original_target the original target is then either dropped or added to the features." />
<meta name="twitter:card" content="summary" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a href="https://mlr-org.com"><img src="https://raw.githubusercontent.com/mlr-org/mlr3/master/man/figures/logo.png" id="hexlogo" alt="mlr-org" /></a>
        <a class="navbar-brand" href="../index.html">mlr3ordinal <small>v0.1.0-9000</small></a>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../reference/index.html">
    <span class="fa fa fa fa-file-alt"></span>
     
    Reference
  </a>
</li>
<li>
  <a href="https://mlr3book.mlr-org.com">
    <span class="fa fa fa fa-link"></span>
     
    mlr3book
  </a>
</li>
        <li>
  <a href="https://github.com/mlr-org/mlr3ordinal/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://lmmisld-lmu-stats-slds.srv.mwn.de/mlr_invite/">
    <span class="fa fa fa fa-comments"></span>
     
  </a>
</li>
<li>
  <a href="https://stackoverflow.com/questions/tagged/mlr3">
    <span class="fab fa fab fa-stack-overflow"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.com/">
    <span class="fa fa-rss"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>PipeOpUpdateTarget</h1>
    <small class="dont-index">Source: <a href='https://github.com/mlr-org/mlr3ordinal/blob/master/R/PipeOpUpdateTarget.R'><code>R/PipeOpUpdateTarget.R</code></a></small>
    <div class="hidden name"><code>mlr_pipeops_updatetarget.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>FOR INTERNAL USE IN MLR3ORDINAL ONLY!
EXPERIMENTAL, API SUBJECT TO CHANGE</p>
<p>Handles target transformation operations that do not need explicit inversion.
In case the new target is required during predict, creates a vector of <code>NA</code>.
Works similar to <code><a href='https://mlr3pipelines.mlr-org.com//reference/PipeOpTargetTrafo.html'>PipeOpTargetTrafo</a></code> and
<code><a href='https://mlr3pipelines.mlr-org.com//reference/mlr_pipeops_targetmutate.html'>PipeOpTargetMutate</a></code>, but forgoes the
inversion step.
In case target after the <code>trafo</code> is a factor, levels are saved to <code>$state</code>.<br /></p>
<p>During prediction: Sets all target values to <code>NA</code> before calling the <code>trafo</code> again.
In case target after the <code>trafo</code> is a factor, levels saved in the <code>state</code> are
set during prediction.</p>
<p>As a special case when <code>trafo</code> is <code>identity</code> and <code>new_target_name</code> matches an existing column
name of the data of the input <code><a href='https://mlr3.mlr-org.com/reference/Task.html'>Task</a></code>, this column is set as the new target. Depending on
<code>drop_original_target</code> the original target is then either dropped or added to the features.</p>
    </div>



    <h2 class="hasAnchor" id="format"><a class="anchor" href="#format"></a>Format</h2>

    <p>Abstract <code>R6Class</code> inheriting from <code><a href='https://mlr3pipelines.mlr-org.com//reference/PipeOp.html'>PipeOp</a></code>.</p>
    <h2 class="hasAnchor" id="construction"><a class="anchor" href="#construction"></a>Construction</h2>

    
<pre><span class='no'>PipeOpUpdateTarget</span>$<span class='fu'>new</span>(<span class='no'>id</span>, <span class='kw'>param_set</span> <span class='kw'>=</span> <span class='no'>ParamSet</span>$<span class='fu'>new</span>(),
  <span class='kw'>param_vals</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(), <span class='kw'>packages</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/character.html'>character</a></span>(<span class='fl'>0</span>))</pre>
<ul>
<li><p><code>id</code> :: <code><a href='https://rdrr.io/r/base/character.html'>character(1)</a></code><br />
Identifier of resulting object. See <code>$id</code> slot of <code><a href='https://mlr3pipelines.mlr-org.com//reference/PipeOp.html'>PipeOp</a></code>.</p></li>
<li><p><code>param_vals</code> :: named <code>list</code><br />
List of hyperparameter settings, overwriting the hyperparameter settings given in <code>param_set</code>.
The subclass should have its own <code>param_vals</code> parameter and pass it on to <code>super$initialize()</code>.
Default <code><a href='https://rdrr.io/r/base/list.html'>list()</a></code>.</p></li>
</ul>

    <h2 class="hasAnchor" id="parameters"><a class="anchor" href="#parameters"></a>Parameters</h2>

    

<p>The parameters are the parameters inherited from <code><a href='https://mlr3pipelines.mlr-org.com//reference/PipeOpTargetTrafo.html'>PipeOpTargetTrafo</a></code>, as well as:</p><ul>
<li><p><code>trafo</code> :: <code>function</code><br />
Transformation function for the target. Should only be a function of the target, i.e., taking a
single argument. Default is <code>identity</code>.
Note, that the data passed on to the target is a <code>data.table</code> consisting of all target column.</p></li>
<li><p><code>new_target_name</code> :: <code><a href='https://rdrr.io/r/base/character.html'>character(1)</a></code><br />
Optionally give the transformed target a new name. By default the original name is used.</p></li>
<li><p><code>new_task_type</code> :: <code><a href='https://rdrr.io/r/base/character.html'>character(1)</a></code><br />
Optionally a new task type can be set. Legal types are listed in
<code>mlr_reflections$task_types$type</code>.
#' <code>drop_original_target</code> :: <code><a href='https://rdrr.io/r/base/logical.html'>logical(1)</a></code><br />
Whether to drop the original target column. Default: <code>TRUE</code>.</p></li>
</ul>

    <h2 class="hasAnchor" id="state"><a class="anchor" href="#state"></a>State</h2>

    

<p>The <code>$state</code> is a list of class levels for each target after trafo.
<code><a href='https://rdrr.io/r/base/list.html'>list()</a></code> if none of the targets have levels.</p>
    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    

<p>Only methods inherited from <code><a href='https://mlr3pipelines.mlr-org.com//reference/PipeOp.html'>PipeOp</a></code>.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other PipeOps: 
<code><a href='mlr_pipeop_ordinalclassif.html'>mlr_pipeop_ordinalclassif</a></code>,
<code><a href='mlr_pipeop_ordinalregr.html'>mlr_pipeop_ordinalregr</a></code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='co'># Create a binary class task from iris</span>
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>mlr3</span>)
<span class='no'>trafo_fun</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>x</span>) {<span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span>(<span class='no'>x</span>$<span class='no'>Species</span> <span class='kw'>==</span> <span class='st'>"setosa"</span>, <span class='st'>"setosa"</span>, <span class='st'>"other"</span>))}
<span class='no'>po</span> <span class='kw'>=</span> <span class='no'>PipeOpUpdateTarget</span>$<span class='fu'>new</span>(<span class='kw'>param_vals</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='kw'>trafo</span> <span class='kw'>=</span> <span class='no'>trafo_fun</span>, <span class='kw'>new_target_name</span> <span class='kw'>=</span> <span class='st'>"setosa"</span>))
<span class='no'>po</span>$<span class='fu'>train</span>(<span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>tsk</a></span>(<span class='st'>"iris"</span>)))
<span class='no'>po</span>$<span class='fu'><a href='https://rdrr.io/r/stats/predict.html'>predict</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(<span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>tsk</a></span>(<span class='st'>"iris"</span>)))
}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Stefan Coors.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


